# è§†é¢‘åˆ†æ®µå˜é€Ÿå·¥å…· - å®Œæ•´å®žçŽ°æ€»ç»“

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. æ ¸å¿ƒå¤„ç†è„šæœ¬
- **`src/speed_adjuster.py`** - Python æ ¸å¿ƒå¤„ç†é€»è¾‘
  - è§£æž JSON é…ç½®
  - ä½¿ç”¨ FFmpeg å¤„ç†è§†é¢‘ç‰‡æ®µ
  - è‡ªåŠ¨æ‹¼æŽ¥æ‰€æœ‰ç‰‡æ®µ
  - æ”¯æŒä»»æ„æ’­æ”¾é€Ÿåº¦

### 2. ä¾¿æ·åŒ…è£…è„šæœ¬
- **`adjust_speed.sh`** - Shell åŒ…è£…è„šæœ¬
  - ç®€åŒ–å‘½ä»¤è¡Œä½¿ç”¨
  - è‡ªåŠ¨å‚æ•°éªŒè¯
  - å‹å¥½çš„é”™è¯¯æç¤º

### 3. ç¤ºä¾‹å’Œæµ‹è¯•
- **`speed_config_example.json`** - ç¤ºä¾‹é…ç½®æ–‡ä»¶
- **`test_speed_adjuster.sh`** - è‡ªåŠ¨æµ‹è¯•è„šæœ¬

### 4. æ–‡æ¡£
- **`docs/VIDEO_SPEED_ADJUSTMENT.md`** - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
- **`SPEED_QUICK_START.md`** - 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- **`README.md`** - å·²æ›´æ–°ï¼Œæ·»åŠ æ–°åŠŸèƒ½è¯´æ˜Ž

---

## ðŸš€ å¦‚ä½•ä½¿ç”¨

### æ–¹æ³• 1ï¼šä½¿ç”¨ Shell è„šæœ¬ï¼ˆæŽ¨èï¼‰

```bash
cd vedio-tools

# åŸºæœ¬ç”¨æ³•
./adjust_speed.sh è¾“å…¥è§†é¢‘.mp4 é…ç½®æ–‡ä»¶.json è¾“å‡ºè§†é¢‘.mp4

# å®žé™…ä¾‹å­
./adjust_speed.sh ./data/video.mp4 speed_config_example.json ./output/video_adjusted.mp4
```

### æ–¹æ³• 2ï¼šç›´æŽ¥ä½¿ç”¨ Python è„šæœ¬

```bash
python3 src/speed_adjuster.py è¾“å…¥è§†é¢‘.mp4 é…ç½®æ–‡ä»¶.json è¾“å‡ºè§†é¢‘.mp4
```

### æ–¹æ³• 3ï¼šå¿«é€Ÿæµ‹è¯•

```bash
# è‡ªåŠ¨ä½¿ç”¨æµ‹è¯•è§†é¢‘å’Œé…ç½®è¿›è¡Œæµ‹è¯•
./test_speed_adjuster.sh
```

---

## ðŸ“ é…ç½®æ–‡ä»¶æ ¼å¼

```json
{
    "part": [
        {
            "timestamp": "00:00:50 - 00:01:00",
            "speed": 1.2
        },
        {
            "timestamp": "00:01:00 - 00:01:10",
            "speed": 1.0
        },
        {
            "timestamp": "00:01:10 - 00:01:20",
            "speed": 1.3
        }
    ]
}
```

### å­—æ®µè¯´æ˜Ž
- **timestamp**: æ—¶é—´èŒƒå›´ "å¼€å§‹ - ç»“æŸ"
  - æ ¼å¼ï¼š`HH:MM:SS`ã€`MM:SS` æˆ– `SS`
  - ä¾‹ï¼š`"00:01:30 - 00:02:00"`

- **speed**: æ’­æ”¾é€Ÿåº¦å€æ•°
  - `1.0` = æ­£å¸¸
  - `> 1.0` = åŠ å¿«ï¼ˆå¦‚ `1.5`ï¼‰
  - `< 1.0` = å‡æ…¢ï¼ˆå¦‚ `0.8`ï¼‰

---

## ðŸŽ¯ æ ¸å¿ƒåŠŸèƒ½

1. **åˆ†æ®µé€Ÿåº¦è°ƒæ•´**
   - å¯¹è§†é¢‘çš„ä¸åŒæ—¶é—´æ®µåº”ç”¨ä¸åŒçš„æ’­æ”¾é€Ÿåº¦
   - æ”¯æŒä»»æ„æ•°é‡çš„ç‰‡æ®µé…ç½®

2. **è‡ªåŠ¨éŸ³é¢‘åŒæ­¥**
   - ä½¿ç”¨ FFmpeg çš„ `atempo` æ»¤é•œ
   - ä¿æŒéŸ³è°ƒä¸å˜ï¼Œåªæ”¹å˜é€Ÿåº¦
   - è‡ªåŠ¨å¤„ç†è¶…å‡º 0.5-2.0 èŒƒå›´çš„é€Ÿåº¦

3. **æ™ºèƒ½å¡«å……**
   - æœªé…ç½®çš„æ—¶é—´æ®µè‡ªåŠ¨ä¿æŒåŽŸé€Ÿ
   - ç¡®ä¿è§†é¢‘çš„å®Œæ•´æ€§å’Œè¿žç»­æ€§

4. **æ— ç¼æ‹¼æŽ¥**
   - è‡ªåŠ¨æ‹¼æŽ¥æ‰€æœ‰å¤„ç†åŽçš„ç‰‡æ®µ
   - ä¿æŒè§†é¢‘è´¨é‡

---

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### FFmpeg æ»¤é•œ
- **setpts**: è°ƒæ•´è§†é¢‘æ—¶é—´æˆ³
  - `setpts=0.5*PTS` â†’ 2å€é€Ÿ
  - `setpts=2.0*PTS` â†’ 0.5å€é€Ÿ

- **atempo**: è°ƒæ•´éŸ³é¢‘é€Ÿåº¦ï¼ˆä¿æŒéŸ³è°ƒï¼‰
  - `atempo=1.5` â†’ 1.5å€é€Ÿ
  - `atempo=0.8` â†’ 0.8å€é€Ÿ
  - æ”¯æŒé“¾å¼è°ƒç”¨å¤„ç†æžç«¯é€Ÿåº¦

### å¤„ç†æµç¨‹
1. è§£æž JSON é…ç½®
2. èŽ·å–è§†é¢‘æ—¶é•¿
3. åˆ‡å‰²è§†é¢‘ç‰‡æ®µ
4. å¯¹æ¯ä¸ªç‰‡æ®µåº”ç”¨é€Ÿåº¦è°ƒæ•´
5. æ‹¼æŽ¥æ‰€æœ‰ç‰‡æ®µ
6. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

---

## ðŸ“Š æ€§èƒ½å‚æ•°

- **å¤„ç†æ—¶é—´**: çº¦ä¸ºè§†é¢‘æ—¶é•¿çš„ 1-2 å€
- **ä¸´æ—¶ç©ºé—´**: çº¦ä¸ºè§†é¢‘å¤§å°çš„ 2-3 å€
- **æ”¯æŒæ ¼å¼**: æ‰€æœ‰ FFmpeg æ”¯æŒçš„è§†é¢‘æ ¼å¼
- **é€Ÿåº¦èŒƒå›´**: ç†è®ºä¸Šæ— é™åˆ¶ï¼ˆå»ºè®® 0.5-2.0ï¼‰

---

## ðŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. æ•™å­¦è§†é¢‘ä¼˜åŒ–
```json
{
    "part": [
        {
            "timestamp": "00:00:00 - 00:01:00",
            "speed": 1.5,
            "comment": "å¿«é€Ÿè·³è¿‡ä»‹ç»"
        },
        {
            "timestamp": "00:03:00 - 00:05:00",
            "speed": 0.8,
            "comment": "å‡æ…¢å…³é”®çŸ¥è¯†ç‚¹"
        }
    ]
}
```

### 2. ä¼šè®®å½•åƒå¤„ç†
```json
{
    "part": [
        {
            "timestamp": "00:05:00 - 00:20:00",
            "speed": 1.8,
            "comment": "åŠ å¿«å†—é•¿è®¨è®º"
        },
        {
            "timestamp": "00:30:00 - 00:35:00",
            "speed": 0.7,
            "comment": "å‡æ…¢é‡è¦å†³ç­–éƒ¨åˆ†"
        }
    ]
}
```

### 3. è§†é¢‘èŠ‚å¥ä¼˜åŒ–
```json
{
    "part": [
        {
            "timestamp": "00:00:15 - 00:01:00",
            "speed": 1.3,
            "comment": "åŠ å¿«é“ºåž«"
        },
        {
            "timestamp": "00:02:00 - 00:02:30",
            "speed": 1.5,
            "comment": "åŠ å¿«è¿‡æ¸¡"
        }
    ]
}
```

---

## ðŸ› æ•…éšœæŽ’é™¤

### é—®é¢˜ï¼šFFmpeg å‘½ä»¤å¤±è´¥
**è§£å†³**ï¼šç¡®ä¿å·²å®‰è£… FFmpeg 4.0+
```bash
ffmpeg -version
```

### é—®é¢˜ï¼šä¸´æ—¶ç©ºé—´ä¸è¶³
**è§£å†³**ï¼šæ¸…ç† `/tmp/video_speed_segments/` ç›®å½•
```bash
rm -rf /tmp/video_speed_segments/
```

### é—®é¢˜ï¼šå¤„ç†é€Ÿåº¦å¾ˆæ…¢
**è§£å†³**ï¼š
1. å‡å°‘é…ç½®çš„ç‰‡æ®µæ•°é‡
2. ä½¿ç”¨æ›´å¿«çš„å­˜å‚¨è®¾å¤‡
3. è€ƒè™‘å…ˆåŽ‹ç¼©è§†é¢‘å†å¤„ç†

### é—®é¢˜ï¼šéŸ³é¢‘ä¸åŒæ­¥
**è§£å†³**ï¼š
1. æ£€æŸ¥é€Ÿåº¦é…ç½®æ˜¯å¦åˆç†ï¼ˆå»ºè®®åœ¨ 0.5-2.0 èŒƒå›´å†…ï¼‰
2. ç¡®ä¿ FFmpeg ç‰ˆæœ¬æ”¯æŒ atempo æ»¤é•œ

---

## ðŸ“š æ–‡æ¡£ç´¢å¼•

- ðŸ“– **å®Œæ•´æŠ€æœ¯æ–‡æ¡£**: `docs/VIDEO_SPEED_ADJUSTMENT.md`
- ðŸš€ **å¿«é€Ÿä¸Šæ‰‹æŒ‡å—**: `SPEED_QUICK_START.md`
- ðŸ“ **ç¤ºä¾‹é…ç½®**: `speed_config_example.json`
- ðŸ§ª **æµ‹è¯•è„šæœ¬**: `test_speed_adjuster.sh`
- ðŸ› ï¸ **ä¸» README**: `README.md`

---

## ðŸŽ“ ä¸‹ä¸€æ­¥

1. **å¿«é€Ÿæµ‹è¯•**
   ```bash
   ./test_speed_adjuster.sh
   ```

2. **åˆ›å»ºè‡ªå·±çš„é…ç½®**
   - å¤åˆ¶ `speed_config_example.json`
   - ä¿®æ”¹æ—¶é—´æˆ³å’Œé€Ÿåº¦å€¼
   - è¿è¡Œå¤„ç†è„šæœ¬

3. **é›†æˆåˆ°å·¥ä½œæµ**
   - å¯ä»¥ä¸Žå…¶ä»–è§†é¢‘å¤„ç†å·¥å…·ç»„åˆä½¿ç”¨
   - å¯ä»¥æ‰¹é‡å¤„ç†å¤šä¸ªè§†é¢‘
   - å¯ä»¥è‡ªåŠ¨åŒ–æ•´ä¸ªæµç¨‹

---

## âœ¨ ç‰¹è‰²äº®ç‚¹

- âœ… **ç®€å•æ˜“ç”¨**: ä¸€ä¸ªå‘½ä»¤æžå®š
- âœ… **çµæ´»é…ç½®**: JSON æ ¼å¼ï¼Œæ¸…æ™°ç›´è§‚
- âœ… **æ™ºèƒ½å¤„ç†**: è‡ªåŠ¨å¡«å……ã€è‡ªåŠ¨åŒæ­¥
- âœ… **é«˜è´¨é‡è¾“å‡º**: ä¿æŒåŽŸè§†é¢‘è´¨é‡
- âœ… **å®Œæ•´æ–‡æ¡£**: ä»Žå¿«é€Ÿä¸Šæ‰‹åˆ°é«˜çº§ç”¨æ³•
- âœ… **æµ‹è¯•å‹å¥½**: å†…ç½®æµ‹è¯•è„šæœ¬

---

## ðŸ™ æ„Ÿè°¢ä½¿ç”¨

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿Žåé¦ˆï¼

ç¥æ‚¨è§†é¢‘ç¼–è¾‘æ„‰å¿«ï¼ðŸŽ¬âœ¨

